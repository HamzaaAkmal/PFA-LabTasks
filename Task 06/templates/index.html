<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Parking System</title>
  <link rel="stylesheet" href="/static/css/style.css" />
</head>

<body>
  <!-- ── Sidebar ─────────────────────────────────────────────── -->
  <aside class="sidebar">
    <div class="logo">
      <span class="logo-icon">P</span>
      <span class="logo-text">ParkSmart</span>
    </div>

    <nav class="nav">
      <a href="#" class="nav-item active">
        <svg viewBox="0 0 24 24"><path d="M3 12L12 3l9 9"/><path d="M9 21V12h6v9"/></svg>
        Dashboard
      </a>
      <a href="#" class="nav-item">
        <svg viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
        Detect Plate
      </a>
      <a href="#" class="nav-item">
        <svg viewBox="0 0 24 24"><path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2M9 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2M9 5a2 2 0 0 0 2-2h2a2 2 0 0 0 2 2"/></svg>
        History
      </a>
    </nav>

    <div class="sidebar-footer">AI Parking v1.0</div>
  </aside>

  <!-- ── Main Content ──────────────────────────────────────────── -->
  <main class="main">

    <!-- Top bar -->
    <header class="topbar">
      <h1 class="page-title">Dashboard</h1>
      <div class="topbar-right">
        <span class="badge-live">● LIVE</span>
        <span id="clock" class="clock"></span>
      </div>
    </header>

    <!-- Stat cards -->
    <section class="stats-grid">
      <div class="stat-card">
        <p class="stat-label">Total Vehicles Today</p>
        <p class="stat-value" id="totalVehicles">0</p>
        <p class="stat-sub">Updated on each scan</p>
      </div>
      <div class="stat-card accent">
        <p class="stat-label">Last Plate Detected</p>
        <p class="stat-value small" id="lastPlate">—</p>
        <p class="stat-sub">From latest scan</p>
      </div>
      <div class="stat-card">
        <p class="stat-label">Revenue (Today)</p>
        <p class="stat-value" id="revenue">Rs. 0</p>
        <p class="stat-sub">@ Rs. 30 per vehicle</p>
      </div>
    </section>

    <!-- Upload + Results row -->
    <section class="content-grid">

      <!-- Upload panel -->
      <div class="card upload-card">
        <h2 class="card-title">Upload Vehicle Image</h2>

        <label class="drop-zone" id="dropZone">
          <input type="file" id="fileInput" accept="image/*" hidden />
          <div class="drop-icon">
            <svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          </div>
          <p class="drop-title">Drag &amp; drop or click to upload</p>
          <p class="drop-sub">JPG, JPEG, PNG supported</p>
        </label>

        <!-- Preview -->
        <div class="preview-wrap" id="previewWrap" style="display:none;">
          <img id="previewImg" alt="Preview" />
        </div>

        <button class="btn-primary" id="scanBtn" disabled>Scan Plate</button>
      </div>

      <!-- Results panel -->
      <div class="card results-card">
        <h2 class="card-title">Detection Results</h2>

        <div id="placeholder" class="placeholder-msg">
          <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
          <p>Results will appear here after scanning</p>
        </div>

        <!-- Loader -->
        <div id="loader" class="loader-wrap" style="display:none;">
          <div class="spinner"></div>
          <p>Processing image…</p>
        </div>

        <!-- Result content -->
        <div id="resultContent" style="display:none;">

          <!-- Annotated image -->
          <img id="annoImg" class="result-img" alt="Detection" />

          <div class="info-grid">
            <div class="info-row">
              <span class="info-label">Plate Number</span>
              <span class="info-value highlight" id="rPlate">—</span>
            </div>
            <div class="info-row">
              <span class="info-label">Entry Time</span>
              <span class="info-value" id="rTime">—</span>
            </div>
            <div class="info-row">
              <span class="info-label">Parking Fee</span>
              <span class="info-value" id="rFee">—</span>
            </div>
          </div>

          <!-- Cropped plate -->
          <div class="crop-wrap">
            <p class="crop-label">Cropped Plate (OCR Input)</p>
            <img id="cropImg" alt="Cropped plate" />
          </div>

          <!-- Slip -->
          <div class="slip-wrap" id="slipWrap" style="display:none;">
            <p class="slip-label">Generated Parking Slip</p>
            <img id="slipImg" alt="Parking slip" />
            <a id="downloadBtn" class="btn-outline" download>Download Slip</a>
          </div>

        </div>

        <!-- Error -->
        <div id="errorBox" class="error-box" style="display:none;"></div>

      </div>

    </section>

  </main>

  <script src="/static/js/main.js"></script>
</body>
</html>
